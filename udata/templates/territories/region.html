{% extends theme("territories/territory.html") %}

{% set meta = {
    'title': territory.name,
    'description': _('Datasets related to the region of %(name)s with INSEE code %(code)s', name=territory.name, code=territory.code),
    'keywords': [territory.name, territory.code],
} %}

{% block territory_content %}
    <div class="col-xs-12">
        <p class="breadcrumb">
            <a href="{{ url_for('territories.home') }}">France</a> →
            {{ _('Region:') }} <a href="{{ territory.url }}">{{ territory.name }}</a>
        </p>
    </div>
    <div class="col-sm-8 col-xs-12">
        <div class="col-xs-3">
            <img src="{{ logo }}" alt="{{ territory.name }}" class="scalable" />
            {% if territory.logo_url() %}
                <div class="text-center">
                    <small>
                        {{ _('Source:') }} <a href="{{ territory.wikipedia_url }}">Wikipedia</a> •
                        {{ _('License:') }} <a href="http://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA</a>
                    </small>
                </div>
            {% endif %}
            <div class="caption text-center" style="margin-top: 10px">
                <button class="btn btn-sm btn-left btn-warning btn-block">
                    <span class="fa fa-cloud-upload"></span>
                    {{ _('Update Icon') }}
                </button>
            </div>
        </div>

        <div class="col-xs-9 tab-links">
            <h1>{{ territory.name }}</h1>
            <p>
                <strong>
                    {{ _('INSEE code:') }} {{ territory.code }}
                </strong>
            </p>
            {% if territory.postal_string %}
                <p>
                    <strong>
                        {{ _('Postal code:') }} {{ territory.postal_string }}
                    </strong>
                </p>
            {% endif %}
            {% if territory.population %}
                <p>
                    <strong>
                        {{ _('Population:') }} {{ territory.population|format_number }}
                    </strong>
                </p>
            {% endif %}
            {% if territory.ancestors_objects %}
                <h3><small>
                    {{ _('Previously:') }}
                    {% for ancestor in territory.ancestors_objects %}
                        <a href="{{ ancestor.url }}">{{ ancestor.name }}</a>{% if not loop.last %},{% endif %}
                    {% endfor %}
                </small></h3>
            {% endif %}
            <h3><small>
                {{ _('Counties:') }}
                {% for county in territory.children %}
                    <a href="{{ county.url }}"> {{ county.name }}</a>{% if not loop.last %},{% endif %}
                {% endfor %}
            </small></h3>
        </div>
    </div>

    <aside class="col-sm-4 col-xs-12">
        <div class="panel panel-default">
            <leaflet-map v-ref:map class="aside-map" :popup="false"
                data-zones="{{ url_for('api.zones', ids=[territory.id]) }}">
            </leaflet-map>
        </div>
    </aside>

{% endblock %}
